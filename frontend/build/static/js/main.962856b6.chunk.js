(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){e.exports=a(181)},119:function(e,t,a){},178:function(e,t,a){},181:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),l=a.n(s),o=a(18),c=a(32),i=a(92),u=a(93),h=a(30),d="FETCH_BOOKS",m="FETCH_BOOKLIST",g="LOGIN_REQUEST",b="LOGIN_SUCCESS",p="LOGIN_FAILURE",f="LOGOUT_SUCCESS",v={booklist:[],bookresults:[],loggedIn:!1,loading:!1,error:null,isFetching:!1,isAuthenticated:!1,user:null,username:null,password:null};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;return t.type===d?Object.assign({},e,Object(h.a)({},e,{bookresults:t.payload})):t.type===m?Object.assign({},e,Object(h.a)({},e,{booklist:t.payload})):t.type===g?Object.assign({},e,Object(h.a)({},e,{loggedIn:!1,isFetching:!0,isAuthenticated:!1,user:t.creds})):t.type===b?Object.assign({},e,Object(h.a)({},e,{loggedIn:!0,isFetching:!1,isAuthenticated:!0,errorMessage:""})):t.type===p?Object.assign({},e,Object(h.a)({},e,{loggedIn:!1,isFetching:!1,isAuthenticated:!1,errorMessage:t.message})):t.type===f?Object.assign({},e,Object(h.a)({},e,{booklist:[],loggedIn:!1,isFetching:!0,isAuthenticated:!1})):e},O=a(94),j=a.n(O),k=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),y=Object(c.createStore)(E,k,Object(i.composeWithDevTools)(Object(c.applyMiddleware)(u.a)));y.subscribe(j()(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){}}(y.getState())},1e3));var N=y,w=a(189),C=a(191),S=a(192),L=(a(119),a(10)),B=a(11),I=a(13),R=a(12),A=a(14);a(24);function T(e){return{type:d,payload:e}}function F(e){return{type:m,payload:e}}function U(e){return{type:b,loggedIn:!0,creds:e}}var M=a(8),x=a(183),P=a(86),_=a(182),D=a(187),G="http://54.70.185.24",z=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(I.a)(this,Object(R.a)(t).call(this,e))).state={input:"",isLoading:!1},a.handleChange=a.handleChange.bind(Object(M.a)(Object(M.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(M.a)(Object(M.a)(a))),a}return Object(A.a)(t,e),Object(B.a)(t,[{key:"handleChange",value:function(e){this.setState({input:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch(G+"/createBookList/"+this.props.title,{credentials:"include",method:"GET"}).then(function(e){return e.json()}).then(function(e){return t.props.fetchBooks(e)})}},{key:"render",value:function(){var e=this.state.error;return e?r.a.createElement("div",null,"Error: ",e.message):r.a.createElement("div",{className:"Search"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(_.a,null,r.a.createElement(D.a,{type:"text",className:"input",placeholder:"Search for books related to (enter a title)...",value:this.state.input,onChange:this.handleChange}),r.a.createElement(x.a,{to:{pathname:"/createBookList",state:{title:this.state.input}}},r.a.createElement(P.a,{type:"submit"},"Search")))))}}]),t}(n.Component),H=Object(o.b)(function(e){return{bookresults:e.bookresults}},function(e){return{fetchBooks:function(t){return e(T(t))}}})(z),J=a(33),W=a(188),q=a(185),K=a(162),Q=a(190),Y=a(184),$=a(186),V=function(e){function t(e,a){var n;return Object(L.a)(this,t),(n=Object(I.a)(this,Object(R.a)(t).call(this,e,a))).handleClick=n.handleClick.bind(Object(M.a)(Object(M.a)(n))),n}return Object(A.a)(t,e),Object(B.a)(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return r.a.createElement("a",{href:"",onClick:this.handleClick},this.props.children)}}]),t}(r.a.Component),X=function(e){function t(e,a){var n;return Object(L.a)(this,t),(n=Object(I.a)(this,Object(R.a)(t).call(this,e,a))).handleChange=n.handleChange.bind(Object(M.a)(Object(M.a)(n))),n.state={value:""},n}return Object(A.a)(t,e),Object(B.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=this.props.children,t=this.state.value;return r.a.createElement("div",{className:"dropdown-menu",style:{padding:""}},r.a.createElement("ul",{className:"list-unstyled"},r.a.Children.toArray(e).filter(function(e){return!t.trim()||-1!==e.props.children.indexOf(t)})))}}]),t}(r.a.Component),Z=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(I.a)(this,Object(R.a)(t).call(this,e))).state={username:"",password:"",showRegisterMessage:!1},a.handleLogin=a.handleLogin.bind(Object(M.a)(Object(M.a)(a))),a.handleLogout=a.handleLogout.bind(Object(M.a)(Object(M.a)(a))),a.handleChange=a.handleChange.bind(Object(M.a)(Object(M.a)(a))),a}return Object(A.a)(t,e),Object(B.a)(t,[{key:"handleLogin",value:function(e){var t=this;e.preventDefault();var a=new FormData(e.target);console.log("hitting here?"),fetch(G+"/login",{credentials:"include",method:"POST",body:a}).then(function(e){console.log("response",e),200==e.status?(t.props.loginUser(e),t.props.loggedInCallback(),t.setState({showRegisterMessage:!1})):401==e.status&&t.setState({showRegisterMessage:!0})})}},{key:"handleLogout",value:function(e){var t=this;e.preventDefault(),fetch(G+"/logout",{credentials:"include"}).then(function(){return t.props.logoutUser()})}},{key:"handleChange",value:function(e){this.setState(Object(J.a)({},e.target.name,e.target.value)),console.log(this.state.username,this.state.password)}},{key:"render",value:function(){if(this.props.loggedIn)return r.a.createElement("div",{className:"Nav"},r.a.createElement("div",{className:"profile"},r.a.createElement(Y.a,{xs:12},r.a.createElement(P.a,{className:"logoutbutton",onClick:this.handleLogout},"Logout"))));var e="Please login.";return 1==this.state.showRegisterMessage&&(e="Login unsuccessful. Please try again or register."),r.a.createElement(W.a,{id:"dropdown-custom-menu"},r.a.createElement(V,{bsRole:"toggle"},r.a.createElement(P.a,{className:"loginbutton",bsStyle:"primary",type:"submit"},"Toggle Login")),r.a.createElement(X,{bsRole:"menu"},r.a.createElement($.a,{className:"LoginPanel"},r.a.createElement($.a.Body,null,r.a.createElement("div",{className:"App"},e),r.a.createElement(q.a,null,r.a.createElement("form",{onSubmit:this.handleLogin},r.a.createElement(Y.a,{xs:12},r.a.createElement(_.a,null,r.a.createElement(Q.a,null,r.a.createElement(D.a,{type:"text",placeholder:"Username",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement(D.a,{type:"password",placeholder:"Password",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(K.a,null,r.a.createElement(P.a,{className:"btn-primary-dark",type:"submit"},"Sign On"),r.a.createElement(x.a,{to:{pathname:"/register",state:{username:this.state.username,password:this.state.password}}},r.a.createElement(P.a,null,"Register")))))))))))}}]),t}(n.Component),ee=Object(o.b)(function(e){return{loggedIn:e.loggedIn}},function(e){return{loginUser:function(t){return e(U(t))},logoutUser:function(){return e({type:f,loggedIn:!1})}}})(Z),te=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(I.a)(this,Object(R.a)(t).call(this,e))).handleTrash=function(e){fetch(G+"/book/"+a.props.book_id+"/delete",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){return console.log(e)}).then(function(){return a.props.refreshBooklist()}).catch(function(e){a.setState({isLoading:!0,error:e})})},a.state={error:null,isLoading:!1},a}return Object(A.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoading;return t?r.a.createElement("div",null,"Error: ",t.message):a?r.a.createElement("p",null,"Loading..."):r.a.createElement(P.a,{className:"TrashBtn",bsSize:"xsmall",onClick:this.handleTrash},"Remove")}}]),t}(n.Component),ae=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(I.a)(this,Object(R.a)(t).call(this,e))).refresh=a.refresh.bind(Object(M.a)(Object(M.a)(a))),a}return Object(A.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;this.setState({isLoading:!0}),fetch(G+"/booklist",{credentials:"include"}).then(function(e){return e.json()}).then(function(t){return e.props.fetchBooklist(t)})}},{key:"render",value:function(){var e=this,t=this.props.booklist;if(t&&0!==t.length){var a=t.map(function(t){return r.a.createElement("li",{key:t.book_id},t.title," ",r.a.createElement(te,{book_id:t.book_id,refreshBooklist:e.refresh}))});return r.a.createElement("div",{className:"Booklist"},r.a.createElement($.a,null,r.a.createElement($.a.Heading,null,"Best List Evar"),r.a.createElement($.a.Body,null,a)))}return r.a.createElement("div",{className:"Booklist"},r.a.createElement($.a,null,r.a.createElement($.a.Body,null,"You have zero books in your list.")))}}]),t}(n.Component),ne=Object(o.b)(function(e){return{booklist:e.booklist,loggedIn:e.loggedIn}},function(e){return{fetchBooklist:function(t){return e(F(t))}}})(ae),re=function(e){function t(){return Object(L.a)(this,t),Object(I.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(B.a)(t,[{key:"fetchBooklist",value:function(){var e=this;fetch(G+"/booklist",{credentials:"include"}).then(function(e){return e.json()}).then(function(t){return e.props.fetchBooklist(t)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row nav"},r.a.createElement(ee,{loggedInCallback:function(){return e.fetchBooklist()}})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"App-body"},r.a.createElement(H,null)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"App-body"},r.a.createElement(ne,null))))))}}]),t}(n.Component),se=Object(o.b)(function(e){return{booklist:e.booklist,loggedIn:e.loggedIn}},function(e){return{fetchBooklist:function(t){return e(F(t))}}})(re),le=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(I.a)(this,Object(R.a)(t).call(this,e))).state={error:null,isLoading:!1},a}return Object(A.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoading;return t?r.a.createElement("div",null,"Error: ",t.message):a?r.a.createElement("p",null,"Loading..."):r.a.createElement(x.a,{to:"/"},r.a.createElement(P.a,{bsStyle:"primary"},"Back"))}}]),t}(n.Component),oe=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(I.a)(this,Object(R.a)(t).call(this,e))).handleSave=function(e){a.setState({status:!0});var t=a.props.title;fetch(G+"/book/save",{credentials:"include",method:"POST",body:t})},a.state={status:!1},a}return Object(A.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return this.state.status?r.a.createElement("i",{className:"fa fa-check","aria-hidden":"true"}):r.a.createElement(P.a,{bsSize:"xsmall",onClick:this.handleSave},"Add")}}]),t}(n.Component),ce=Object(o.b)()(oe),ie=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(I.a)(this,Object(R.a)(t).call(this,e))).state={error:null,isLoading:!1},a.refresh=a.refresh.bind(Object(M.a)(Object(M.a)(a))),a}return Object(A.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;this.setState({isLoading:!0}),fetch(G+"/createBookList/"+this.props.title,{credentials:"include",method:"GET"}).then(function(e){return e.json()}).then(function(t){return e.props.fetchBooks(t)}).catch(function(t){e.setState({isLoading:!0,error:t})})}},{key:"handleLogIn",value:function(e,t){this.setState({username:e,loggedIn:t})}},{key:"render",value:function(){var e=this,t=this.props.bookresults,a=t.map(function(t){return r.a.createElement("li",{key:t.book_id},t.title," ",r.a.createElement(ce,{title:t.title,refreshBooklist:e.refresh}))});return 0===t.length?r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(ee,{authenticating:this.handleLogIn}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"App-body"},r.a.createElement("div",{className:"Booklist"},r.a.createElement($.a,null,r.a.createElement($.a.Body,null,"There are zero results.")))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(le,null))))):r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(ee,{authenticating:this.handleLogIn}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"App-body"},r.a.createElement("div",{className:"Booklist"},r.a.createElement($.a,null,r.a.createElement($.a.Heading,null,"List by ",this.props.title),r.a.createElement($.a.Body,null,a)))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(le,null)))))}}]),t}(n.Component),ue=Object(o.b)(function(e){return{bookresults:e.bookresults}},function(e){return{fetchBooks:function(t){return e(T(t))}}})(ie);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(178);var he=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(I.a)(this,Object(R.a)(t).call(this,e))).state={username:"",email:"",password:"",error:null,isLoading:!1,showRegFailMessage:!1},a.handleRegister=a.handleRegister.bind(Object(M.a)(Object(M.a)(a))),a.handleChange=a.handleChange.bind(Object(M.a)(Object(M.a)(a))),a}return Object(A.a)(t,e),Object(B.a)(t,[{key:"handleRegister",value:function(e){var t=this;e.preventDefault();var a=new FormData(e.target);console.log("What about here?"),fetch(G+"/register",{credentials:"include",method:"POST",body:a}).then(function(e){e.json(),400==e.status?t.setState({showRegFailMessage:!0}):(t.props.loginUser(e),t.setState({showRegFailMessage:!0}),t.props.history.goBack())})}},{key:"handleChange",value:function(e){this.setState(Object(J.a)({},e.target.name,e.target.value)),console.log(this.state.username+" "+this.state.password)}},{key:"render",value:function(){var e="Please register.";return 1==this.state.showRegFailMessage&&(e="Register unsuccessful, user already exists. Please try again."),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"RegisterForm signup-screen center"},r.a.createElement("div",{className:"App"},e),r.a.createElement("form",{onSubmit:this.handleRegister},r.a.createElement(_.a,{controlId:"formBasicUsername"},r.a.createElement(D.a,{type:"text",name:"username",placeholder:"Username",required:!0,value:this.state.username,onChange:this.handleChange})),r.a.createElement(_.a,{controlId:"formBasicEmail"},r.a.createElement(D.a,{type:"email",name:"email",placeholder:"Email",required:!0,value:this.state.email,onChange:this.handleChange})),r.a.createElement(_.a,{controlId:"formBasicPassword"},r.a.createElement(D.a,{type:"password",name:"password",placeholder:"Password",required:!0,value:this.state.password,onChange:this.handleChange})),r.a.createElement(K.a,null,r.a.createElement(P.a,{type:"submit"},"Register"),r.a.createElement(le,null))))))))}}]),t}(n.Component),de=Object(o.b)(function(e){return{loggedIn:e.loggedIn,username:e.username,password:e.password}},function(e){return{loginUser:function(t){return e(U(t))}}})(he);l.a.render(r.a.createElement(o.a,{store:N},r.a.createElement(w.a,null,r.a.createElement(C.a,null,r.a.createElement(S.a,{exact:!0,path:"/",component:se}),r.a.createElement(S.a,{path:"/createBookList",render:function(e){return r.a.createElement(ue,{title:e.location.state.title})}}),r.a.createElement(S.a,{path:"/register",component:de})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},24:function(e,t,a){}},[[101,2,1]]]);
//# sourceMappingURL=main.962856b6.chunk.js.map